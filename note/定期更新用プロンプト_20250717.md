# Englishy 定期更新用プロンプト
# 保存場所: englishy/note/定期更新用プロンプト_20250717.md
# 作成日: 2025-07-17

## 概要
このファイルは、Englishyプロジェクトの定期的な改善・更新作業を効率的に進めるためのプロンプト集です。
各モジュールの品質向上、新機能追加、バグ修正などの作業時に参照してください。

## 定期更新の種類

### 1. プロンプト改善・最適化
**目的**: AIモジュールの出力品質向上、一貫性の改善

**使用タイミング**:
- ユーザーフィードバックで出力の不満が増えた時
- 新しい文法項目や学習内容への対応が必要な時
- 出力フォーマットの統一が必要な時

**プロンプト例**:
```
Englishyプロジェクトの[モジュール名]のプロンプト改善を行ってください。

現状の課題:
- [具体的な課題1]
- [具体的な課題2]

改善目標:
- [改善したい点1]
- [改善したい点2]

現在のプロンプト:
[現在のプロンプト内容]

以下の点を考慮して改善案を提案してください：
1. 出力の一貫性向上
2. ユーザー体験の最適化
3. 既存の設計原則との整合性
4. テスト可能性の確保

改善後は必ずテストケースも追加してください。
```

### 2. 変換辞書の拡充・修正
**目的**: 日本語→英語変換の精度向上、新しい文法用語への対応

**使用タイミング**:
- 新しい文法用語が追加された時
- 変換エラーが報告された時
- 学習指導要領の変更があった時

**プロンプト例**:
```
QueryRefinerの日本語→英語変換辞書を拡充してください。

追加したい文法用語:
- [新しい文法用語1]
- [新しい文法用語2]

現在の辞書構造:
[現在の辞書の一部]

以下の点を確認してください：
1. 部分一致による誤変換がないか
2. 既存の辞書との整合性
3. テストケースの追加
4. 長いキーから順にreplaceする仕組みの維持

修正後は必ずテストを実行して全ケースがパスすることを確認してください。
```

### 3. テストケースの追加・改善
**目的**: 品質保証の強化、回帰テストの充実

**使用タイミング**:
- 新機能追加時
- バグ修正時
- エッジケースの発見時

**プロンプト例**:
```
[モジュール名]のテストケースを追加してください。

追加したいテストケース:
- [テストケース1の説明]
- [テストケース2の説明]

現在のテストファイル:
[現在のテストファイルの場所]

以下の点を考慮してください：
1. pytest形式での実装
2. 明確な期待値の設定
3. エラーメッセージの分かりやすさ
4. Docker環境での実行可能性

追加後は必ず全テストがパスすることを確認してください。
```

### 4. パフォーマンス最適化
**目的**: 処理速度の向上、リソース使用量の最適化

**使用タイミング**:
- 処理時間が長くなった時
- メモリ使用量が増加した時
- ユーザーからの速度に関するフィードバックがあった時

**プロンプト例**:
```
[モジュール名]のパフォーマンス最適化を行ってください。

現在の課題:
- [具体的なパフォーマンス課題]
- [測定結果]

最適化目標:
- [改善したい指標]
- [目標値]

以下の点を確認してください：
1. 不要な処理の削除
2. キャッシュの活用
3. アルゴリズムの改善
4. リソース使用量の最適化

最適化後は必ずパフォーマンステストを実行してください。
```

### 5. 新機能追加
**目的**: ユーザー体験の向上、機能の拡張

**使用タイミング**:
- ユーザーからの要望があった時
- 競合他社の機能を参考にしたい時
- 技術的な可能性を検討したい時

**プロンプト例**:
```
Englishyプロジェクトに新機能を追加してください。

新機能の概要:
[機能の説明]

追加したい機能:
- [機能1の詳細]
- [機能2の詳細]

以下の点を考慮してください：
1. 既存のアーキテクチャとの整合性
2. ユーザー体験への影響
3. 実装の複雑さ
4. テスト可能性
5. ドキュメント更新の必要性

実装後は必ずテストとドキュメント更新を行ってください。
```

## 定期更新の手順

### 1. 現状分析
```bash
# 現在のテスト実行
docker compose exec englishy pytest /app/tests/

# ログの確認
docker compose logs englishy

# パフォーマンス測定（必要に応じて）
```

### 2. 改善実施
- 該当するプロンプトを使用
- 段階的な改善（一度に大きな変更は避ける）
- 各段階でテスト実行

### 3. 検証・確認
```bash
# 全テストの実行
docker compose exec englishy pytest /app/tests/ -v

# 特定モジュールのテスト
docker compose exec englishy pytest /app/tests/test_query_refiner.py -v

# カバレッジ確認（必要に応じて）
docker compose exec englishy pytest /app/tests/ --cov=src
```

### 4. ドキュメント更新
- `prompt_improvement_plan.yaml` の更新
- このファイルの更新
- README.md の更新（必要に応じて）

## 定期更新のチェックリスト

### 毎週の確認項目
- [ ] 全テストがパスしているか
- [ ] エラーログに異常がないか
- [ ] ユーザーフィードバックの確認

### 毎月の確認項目
- [ ] プロンプトの効果測定
- [ ] パフォーマンスの確認
- [ ] 新機能の検討

### 四半期の確認項目
- [ ] アーキテクチャの見直し
- [ ] 大規模な改善の検討
- [ ] 技術スタックの更新検討

## 注意事項

1. **段階的な改善**: 一度に大きな変更は避け、小さな改善を積み重ねる
2. **テストの重要性**: 全ての変更はテストで検証する
3. **ドキュメント更新**: 変更内容は必ずドキュメントに記録する
4. **ユーザー体験**: 改善はユーザー体験の向上を目的とする
5. **既存機能の維持**: 新機能追加時は既存機能の動作を確認する

## 参考資料

- `prompt_improvement_plan.yaml`: プロジェクト全体の改善計画
- `tests/`: テストファイル群
- `src/ai/`: AIモジュールの実装
- `docker-compose.yml`: 開発環境の設定

---

**最終更新**: 2025-07-17
**更新者**: AI Assistant
**次回更新予定**: 2025-08-17 